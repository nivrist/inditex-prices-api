<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
    "-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
    "https://checkstyle.org/dtds/configuration_1_3.dtd">

<!--
    Configuración de CheckStyle para Inditex Prices API

    Objetivo: Asegurar calidad de código y consistencia en el estilo
    siguiendo las mejores prácticas de Java y Spring Boot.
-->
<module name="Checker">
    <property name="charset" value="UTF-8"/>
    <property name="severity" value="error"/>
    <property name="fileExtensions" value="java"/>

    <module name="TreeWalker">

        <!-- ============================================ -->
        <!-- Convenciones de Nombres -->
        <!-- ============================================ -->

        <!-- Nombres de constantes en UPPER_CASE -->
        <module name="ConstantName">
            <property name="format" value="^[A-Z][A-Z0-9]*(_[A-Z0-9]+)*$"/>
        </module>

        <!-- Variables finales locales en camelCase -->
        <module name="LocalFinalVariableName"/>

        <!-- Variables locales en camelCase -->
        <module name="LocalVariableName"/>

        <!-- Campos de clase en camelCase -->
        <module name="MemberName"/>

        <!-- Métodos en camelCase -->
        <module name="MethodName"/>

        <!-- Paquetes en minúsculas -->
        <module name="PackageName">
            <property name="format" value="^[a-z]+(\.[a-z][a-z0-9]*)*$"/>
        </module>

        <!-- Parámetros en camelCase -->
        <module name="ParameterName"/>

        <!-- Variables estáticas en camelCase -->
        <module name="StaticVariableName"/>

        <!-- Nombres de tipos (clases, interfaces) en PascalCase -->
        <module name="TypeName"/>

        <!-- ============================================ -->
        <!-- Imports -->
        <!-- ============================================ -->

        <!-- Evitar imports con * -->
        <module name="AvoidStarImport"/>

        <!-- Evitar imports ilegales (como sun.*) -->
        <module name="IllegalImport"/>

        <!-- Detectar imports redundantes -->
        <module name="RedundantImport"/>

        <!-- Detectar imports no utilizados -->
        <module name="UnusedImports"/>

        <!-- ============================================ -->
        <!-- Espacios en Blanco -->
        <!-- ============================================ -->

        <module name="EmptyForIteratorPad"/>
        <module name="GenericWhitespace"/>
        <module name="MethodParamPad"/>
        <module name="NoWhitespaceAfter"/>
        <module name="NoWhitespaceBefore"/>
        <module name="OperatorWrap"/>
        <module name="ParenPad"/>
        <module name="TypecastParenPad"/>
        <module name="WhitespaceAfter"/>
        <module name="WhitespaceAround"/>

        <!-- ============================================ -->
        <!-- Bloques de Código -->
        <!-- ============================================ -->

        <!-- Evitar bloques anidados innecesarios -->
        <module name="AvoidNestedBlocks"/>

        <!-- Detectar bloques vacíos -->
        <module name="EmptyBlock"/>

        <!-- Posición de llaves izquierdas -->
        <module name="LeftCurly"/>

        <!-- Require llaves para if, else, for, do, while -->
        <module name="NeedBraces"/>

        <!-- Posición de llaves derechas -->
        <module name="RightCurly"/>

        <!-- ============================================ -->
        <!-- Complejidad y Tamaño -->
        <!-- ============================================ -->

        <!-- Máximo de parámetros por método -->
        <module name="ParameterNumber">
            <property name="max" value="7"/>
            <property name="tokens" value="METHOD_DEF"/>
        </module>

        <!-- Longitud máxima de métodos -->
        <module name="MethodLength">
            <property name="max" value="150"/>
            <property name="tokens" value="METHOD_DEF"/>
        </module>

        <!-- ============================================ -->
        <!-- Buenas Prácticas -->
        <!-- ============================================ -->

        <!-- Evitar declaraciones de variables vacías -->
        <module name="EmptyStatement"/>

        <!-- Require equals() y hashCode() coherentes -->
        <module name="EqualsHashCode"/>

        <!-- Variables locales deben usarse -->
        <module name="UnusedLocalVariable"/>

        <!-- Parámetros deben usarse -->
        <module name="UnusedLocalVariable"/>

        <!-- Evitar modificadores redundantes -->
        <module name="RedundantModifier"/>

        <!-- Simplificar expresiones booleanas -->
        <module name="SimplifyBooleanExpression"/>

        <!-- Simplificar return booleanos -->
        <module name="SimplifyBooleanReturn"/>

        <!-- ============================================ -->
        <!-- Modificadores -->
        <!-- ============================================ -->

        <!-- Orden de modificadores según JLS -->
        <module name="ModifierOrder"/>

        <!-- ============================================ -->
        <!-- Documentación JavaDoc -->
        <!-- ============================================ -->

        <!-- JavaDoc requerido para métodos públicos -->
        <module name="MissingJavadocMethod">
            <property name="scope" value="public"/>
            <property name="allowMissingPropertyJavadoc" value="true"/>
            <!-- Excluir métodos main de Spring Boot -->
            <property name="ignoreMethodNamesRegex" value="^main$"/>
        </module>

        <!-- JavaDoc requerido para tipos públicos -->
        <module name="MissingJavadocType">
            <property name="scope" value="public"/>
        </module>

        <!-- Suprimir reglas para archivos específicos -->
        <module name="SuppressionXpathSingleFilter">
            <property name="checks" value="HideUtilityClassConstructor"/>
            <property name="files" value=".*Application\.java$"/>
        </module>

        <module name="SuppressionXpathSingleFilter">
            <property name="checks" value="MissingJavadocType"/>
            <property name="files" value=".*Application\.java$"/>
        </module>

        <!-- Suprimir VisibilityModifier para clases de dominio inmutables con @Value -->
        <module name="SuppressionXpathSingleFilter">
            <property name="checks" value="VisibilityModifier"/>
            <property name="files" value=".*/domain/model/.*\.java$"/>
        </module>

        <!-- ============================================ -->
        <!-- Diseño -->
        <!-- ============================================ -->

        <!-- Evitar clases de solo constantes -->
        <module name="HideUtilityClassConstructor"/>

        <!-- Variables de instancia deben ser privadas -->
        <!-- Excepto para clases @Value de Lombok que son inmutables por diseño -->
        <module name="VisibilityModifier">
            <property name="packageAllowed" value="false"/>
            <property name="protectedAllowed" value="true"/>
            <property name="publicMemberPattern" value="^$"/>
            <property name="ignoreAnnotationCanonicalNames" value="lombok.Value, lombok.experimental.PackagePrivate, lombok.experimental.Wither"/>
        </module>

    </module>

    <!-- ============================================ -->
    <!-- Reglas a Nivel de Archivo -->
    <!-- ============================================ -->

    <!-- No usar tabuladores -->
    <module name="FileTabCharacter"/>

    <!-- Longitud máxima de línea -->
    <module name="LineLength">
        <property name="max" value="120"/>
        <property name="ignorePattern" value="^package.*|^import.*|a href|href|http://|https://|ftp://"/>
    </module>

</module>
